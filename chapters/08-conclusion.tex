\chapter{Conclusion}
\label{chp:conclusion} 
This thesis has presented a solution for adapting the \gls{hls}-tool LegUp, to make the tool produce Verilog-output suitable for synthesis towards \gls{asic} architectures. In addition to this, a framework for architectural exploration of digital hardware has been developed, using LegUp to increase the abstraction-level of a functional description. The framework is capable of generating a wide variety of architectural implementations of the given functional specification, using randomized constraints in the \gls{hls}-flow to get varying output. Each of the designs generated by \gls{hls} will automatically be simulated and synthesized, before layout and power analysis is performed on the design. The framework will generate reports containing relevant parameters, like area, power estimates, performance, and register count, for each design. The reports allow for the designer to easily compare the designs and select the one best suited based on the specification.

To ensure the functionality of the framework, a proof of concept has been conducted, using a FIR-filter as the reference design. The results from the framework shows that three of the six randomized constraint used, had an impact on the generated design. This gave a total of 8 architectural variations. By comparing the best and worst of the generated architectural variations, a decrease in area of 13.28\% and a decrease in power consumption of 9.52\% could be achieved. These results indicate that the proof of concept works.

When running the framework, some problems and bugs in the generated design were observed. Some of these were related to how the adaption of LegUp is performed, while some could be bugs in LegUp or the tool-flow. It is also an element of concern that the way you write your functional specification can affect the generated designs greatly. The compiler or LegUp should be able to optimize away any parts of the code that is obsolete. If this concept is to be used at a professional level, it is vital that all parts of the framework generate error-free results. 

The overhead in area and power estimates are still high, with a best observed result of 31.57\% in terms of area and 42.02\% in terms of average power consumption. The overhead is especially high in the non-optimized functional specification used in most of \cref{chp:frameworkresults}, where the generated overhead in area and power consumption is close to 200\%. This overhead needs to be reduced, or at least ensured to stay at a constant percentage, if the \gls{hls}-tool is to be used in the framework.

The final conclusion is that the concept have been shown and is generating varying results in the proof of concept. As only one design was used during the proof of concept, it cannot be concluded that the concept will work for every design until further testing has been conducted. More designs should be run through the framework to ensure the consistency of the results. It is also shown that LegUp, in the adapted version described in this thesis, can be used in a framework for architectural exploration. However, much more effort should be put into verification and testing of all parts of the tool-flow, to ensure all bugs and potential errors are eliminated before using it for any commercial purpose.
\section{Future work}
\label{sec:futurework} 
The following subsections will describe some areas of interest that is suggested to looked into in more detail if this thesis should be continued into a project or thesis at a later point.
\subsection{Abstraction level}
During the process of adapting LegUp, to make the generated Verilog more suitable for \gls{asic} implementation, much of the higher level of abstraction originally supported by LegUp, have been lost. The limitation on how the code can be written, reduces the usefulness of the framework. It would increase the value of the framework greatly if a better solution to the resolved issues can be found, or another method can be used to bring back the desired functionality from \gls{ansi}-C.

\subsection{Resolving bugs}
In \cref{sec:designbugs}, two bugs that were noticed during simulation have been described. For the framework to be useful, the generated designs should be bug-free, given that no bugs are present in the functional description. It should be put some effort into figuring out what is creating these bugs, and find a solution to avoid that these, or other, bugs are generated in future designs.

\subsection{Eliminating RAM states}
In \cref{subsec:removerams}, a method of removing local \gls{ram}s generated by using the keyword \textit{volatile} for input-parameters was described. This method of removing the \gls{ram}s does not seem to remove the states designated to the allocation and storing to the generated \gls{ram}s. An example of this can be seen by looking at the generated state machine in \cref{fig:verilogfsm}. Here the states \textit{1} and \textit{2} does not perform any operations, as they were dedicated to allocation of, and storing to, the generated \gls{ram}. A method of removing these states should be added to the altered version of LegUp. Having states in the \gls{fsm} that do not perform any operation, only leads to extra clock-cycles being used to produce the desired output, decreasing the overall speed of the circuit.

\subsection{Advances in LegUp since last release}
For this thesis, the current release version (4.0) of LegUp, released in August 2015, was used. LegUp's normal release cycle is roughly once a year \cite{legupfaq}. From the GIT repository of LegUp \cite{legupgit}, it can be seen that many new features have been, and still are being, implemented for the next release version of LegUp. One of the more interesting features from the views of this thesis is the implementation of streaming inputs and outputs. Even though this has been implemented in this thesis as well, a native implementation from the developers can be more thoroughly tested and have more functionality than the one implemented here. However, it is still uncertain if a good way of producing multiple output-signals have been implemented. In another commit it is mentioned that it will be possible to mark a \gls{ram} as external, making it possible to pass pointers as arguments into the top-level function. These features are exciting news from the perspective of this thesis, as it can look like the developers implements more things useful for \gls{asic} hardware development. The upcoming release of LegUp, should be explored to see if any of the new features is useful for the concept described in this thesis. 

\subsection{Automatic code-optimization}
The overhead in both area and power consumption could be reduced greatly by manually optimizing the code input to the framework, as described in \cref{sec:codeoptimization}. This is a huge drawback of the framework, as it forces the designer to keep focus on writing the code in the most correct way, instead of focusing on writing the correct functional specification. The task of optimizing the input should be left to the compiler or \gls{hls}-tool. It would be strongly beneficial if a solution could be implemented to ensure that the code is optimized correctly.

\subsection{Incorporating Nordic Semiconductors DDVC}
The last objective described in \cref{sec:projectobj} have not been considered in this thesis, as the work with providing a functional framework and creating the proof of concept took all of the available time. It would still be interesting to see if the incorporation of Nordic Semiconductors \gls{ddvc} into the Verilog-generating libraries of LegUp will reduce the overhead of the tool.